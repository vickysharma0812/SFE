<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>lecture-8-faq</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-a14e3238c51140e99ccc48519b6ed9ce.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="fullcontent quarto-light">

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="questions-asked-in-lecture-8" class="level1">
<h1>Questions asked in Lecture 8</h1>
<section id="what-is-special-about-jack-pine-in-using-n" class="level2">
<h2 class="anchored" data-anchor-id="what-is-special-about-jack-pine-in-using-n">What is special about Jack Pine in Using N?</h2>
<p>We have discussed the following points about Jack Pine in the class.</p>
<ol type="1">
<li>It has low physiological capacity to uptake nitrate in soil, even when concentrations of nitrate ions is very high.</li>
<li>Jack pine shows a preference to uptake and assimilate amonium ions as compared to nitrate ions from soil solution to meet its Nitrogen demands.</li>
</ol>
<p>Due to point 1, Jack pine is typically adapted to nutrient-poor, well-drained soils, such as dry sandy plains and rocky uplands. By well-drained soils, we mean that the soils have low water holding capacity and water can easily move through the soil profile. In addition such soils have poor nutrient holding capacity.</p>
<p>When Jack Pine is grown in nitrate rich soils, there can be imbalance of nitrogent to other nutrient ration (such as phosphorus, potassium). This can lead to poor growth and development of Jack Pine as discussed in this <a href="https://www.mdpi.com/1999-4907/9/9/549">paper</a>.</p>
<p>The excessive nitrate (or N) in the soil will initially promote the growth but in the long term it will accelerate nutrient imbalance and reduce tree health. It may lead to the acidity of the soil (<a href="https://doi.org/10.1016/j.foreco.2025.122523">Du et al 2025</a>). This will affect not only the tree health, such as nutrient status, primary production, growth, vitality and mortality, but also affecting plant diversity, microbial activity and nutrient availability as well as gaseous and leaching losses.</p>
<p>Jack pine’s nutrient uptake systems are adapted to low-nutrient environments, and excessive nitrogen can disrupt stoichiometric balances, particularly the nitrogen-to-phosphorus (N:P) and nitrogen-to-magnesium ratios.</p>
<p>Greater availability of nitrogen may lead to allocation of resources to aboveground parts, possibly at the expense of root development. This could make trees more vulnerable to drought stress or windthrow, particularly in less sandy soils.</p>
<p>Jack pine plantations may not utilize all available nitrogen efficiently. This can lead to nitrate leaching into groundwater or eutrophication of nearby aquatic systems.</p>
<p>Please read the following paper for more information <a href="https://doi.org/10.1111/nph.17110">Zhou et al 2020</a>.</p>
</section>
<section id="nitrogen-cycle" class="level2">
<h2 class="anchored" data-anchor-id="nitrogen-cycle">Nitrogen cycle</h2>
<section id="overview-of-the-nitrogen-cycle" class="level3">
<h3 class="anchored" data-anchor-id="overview-of-the-nitrogen-cycle">Overview of the Nitrogen Cycle</h3>
<p>Nitrogen is an essential nutrient for all living organisms, integral to the formation of proteins, nucleic acids, and chlorophyll. Despite its abundance in the atmosphere as dinitrogen gas (N₂), most organisms cannot utilize it in this inert form. The nitrogen cycle encompasses a series of microbial-mediated processes that convert nitrogen into various chemical forms, facilitating its assimilation by living organisms. ￼ ￼</p>
</section>
<section id="key-processes-in-the-nitrogen-cycle" class="level3">
<h3 class="anchored" data-anchor-id="key-processes-in-the-nitrogen-cycle">Key Processes in the Nitrogen Cycle</h3>
<ol type="1">
<li><strong>Nitrogen Fixation</strong>: This process converts atmospheric N₂ into ammonia (NH₃), a form accessible to plants. Biological nitrogen fixation is primarily carried out by specific prokaryotes, including free-living bacteria and symbiotic bacteria associated with plant roots. Abiotic processes, such as lightning and industrial activities, also contribute to nitrogen fixation. ￼</li>
<li><strong>Nitrification</strong>: Ammonia is oxidized to nitrite (NO₂⁻) and subsequently to nitrate (NO₃⁻) by nitrifying bacteria. These forms are readily absorbed by plants but can also leach into water bodies, leading to environmental concerns. ￼</li>
<li><strong>Assimilation</strong>: Plants assimilate nitrate and ammonia to synthesize organic nitrogen compounds, which are then transferred through the food web. ￼</li>
<li><strong>Ammonification</strong>: Decomposition of organic nitrogen from dead organisms and waste products results in the release of ammonia back into the soil, making it available for other processes in the cycle.</li>
<li><strong>Denitrification</strong>: Under anaerobic conditions, denitrifying bacteria convert nitrate back into gaseous N₂, releasing it into the atmosphere and completing the cycle. ￼</li>
</ol>
</section>
<section id="human-impact-on-the-nitrogen-cycle" class="level3">
<h3 class="anchored" data-anchor-id="human-impact-on-the-nitrogen-cycle">Human Impact on the Nitrogen Cycle</h3>
<p>Since the mid-20th century, human activities have significantly disrupted the natural nitrogen cycle: ￼</p>
<ul>
<li><strong>Agricultural Practices</strong>: The extensive use of synthetic nitrogen fertilizers has increased the amount of bioavailable nitrogen in ecosystems, leading to nutrient imbalances and environmental issues such as eutrophication.</li>
<li><strong>Fossil Fuel Combustion</strong>: Burning fossil fuels releases nitrogen oxides into the atmosphere, contributing to air pollution and acid rain.</li>
<li><strong>Industrial Processes</strong>: The Haber-Bosch process has exponentially increased the amount of fixed nitrogen, surpassing natural fixation rates and altering global nitrogen dynamics. ￼</li>
</ul>
<p>These anthropogenic influences have led to increased primary productivity in some ecosystems but have also caused detrimental effects, including biodiversity loss, water quality degradation, and the formation of hypoxic zones in aquatic environments.</p>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<p>The nitrogen cycle is a complex interplay of biological and chemical processes essential for sustaining life on Earth. Microorganisms play a pivotal role in facilitating the transformation of nitrogen into forms usable by plants and animals. However, human activities have significantly altered the natural balance of this cycle, leading to environmental challenges that necessitate sustainable management practices to mitigate adverse impacts. ￼</p>
<p>Please read the introduction of the following paper for a good overview of Nitrogen cycle in forest ecosystem.</p>
<ul>
<li><a href="https://doi.org/10.1111/nph.17110">Zhou et al 2020</a> Introduction section will given you enough information about importance of N in forest ecosystem.</li>
<li><a href="https://www.nature.com/scitable/knowledge/library/the-nitrogen-cycle-processes-players-and-human-15644632/">The Nitrogen Cycle: Processes, Players, and Human Impact</a> I recomment readng the Introduction section of this paper.</li>
<li></li>
</ul>
</section>
</section>
<section id="effect-of-devegetation-on-nutrient-in-soils" class="level2">
<h2 class="anchored" data-anchor-id="effect-of-devegetation-on-nutrient-in-soils">Effect of devegetation on nutrient in soils</h2>
<p>Clear-cutting, a forest disturbance resulting in the removal of all trees, significantly impacts soil nutrients. It can lead to increased soil nutrient losses, particularly nitrogen (N) and phosphorus (P), and changes in soil properties. These effects are due to reduced nutrient uptake by trees, changes in soil temperature and moisture, and alterations in soil structure.</p>
<ul>
<li><p>Increased Soil Temperature and Water Percolation: Clear-cutting reduces evapotranspiration, leading to higher soil temperatures and increased water infiltration, which can accelerate nutrient leaching.</p></li>
<li><p>Changes in Soil Structure: Clear-cutting can disrupt soil aggregate structure, making soils more prone to erosion and nutrient loss.</p></li>
<li><p>Increased Mineralization and Leaching: Following clear-cutting, nitrogen mineralization increases, and the resulting inorganic nitrogen (ammonium and nitrate) can be leached from the soil, potentially reaching groundwater and streams.</p></li>
<li><p>Loss of Soil Organic Matter: Clear-cutting can accelerate the loss of soil organic matter (SOM), which is a crucial source of nutrients.</p></li>
<li><p><a href="https://doi.org/10.1016/j.foreco.2021.119520">Effects of clearcutting and girdling on soil respiration and fluxes of dissolved organic carbon and nitrogen in a Japanese cedar plantation</a></p></li>
<li><p><a href="https://eos.com/blog/clear-cutting/">Please read this article on clearing cutting of forest</a></p></li>
<li><p><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC6675395/">Short-term impacts of forest clear-cut on soil structure and consequences for organic matter composition and nutrient speciation: A case study</a></p></li>
<li><p><a href="https://www-sciencedirect-com.kyoto-u.idm.oclc.org/science/article/pii/S037811272200319X">Effects of whole-tree and stem-only clearcutting on forest floor and soil carbon and nutrients in a balsam fir</a></p></li>
<li><p><a href="https://doi.org/10.1016/S0016-7061(96)00075-4">Clear-cut forest harvest impacts on soil quality indicators in the mixedwood forest of Saskatchewan, Canada</a></p></li>
</ul>
</section>
<section id="biogeochemical-efficiency-of-forest-ecosystems" class="level2">
<h2 class="anchored" data-anchor-id="biogeochemical-efficiency-of-forest-ecosystems">Biogeochemical efficiency of forest ecosystems</h2>
<p>Forests are highly efficient in biogeochemical cycling, playing a crucial role in regulating the movement of elements like carbon, nitrogen, and phosphorus between living organisms and the environment. This efficiency is due to a combination of factors, including high rates of photosynthesis, nutrient uptake from the soil, and nutrient recycling through processes like litterfall and decomposition.</p>
<p>Forest productivity can be assessed through the annual biomass gain per hectare. In tropical forests, rapid decomposition of organic debris ensures efficient nutrient recycling, preventing organic matter buildup and maintaining a balance between carbon input and output.</p>
<p>In contrast, temperate deciduous forests accumulate organic material, forming nutrient-rich humus, making them more effective at storing carbon and nitrogen compared to tropical forests. Boreal forests also serve as significant carbon and nitrogen sinks, but climate change is diminishing their extent, contributing to increased greenhouse gas emissions due to altered biogeochemical cycles.</p>
<p>Nitrogen enters forest soils through biological fixation—either via symbiotic relationships or atmospheric processes like lightning—and to a lesser extent through precipitation. In Estonia, nitrogen availability in forests is relatively low. Among native species, only alders engage in nitrogen fixation, enhancing soil fertility, though the process is energetically demanding; producing 100 kg of nitrogen can require around 2 tonnes of dry biomass from alder trees.</p>
<p>Please read the introduction and abstract of the following paper for more information on biogeochemical efficiency of forest ecosystems.</p>
<ul>
<li><a href="https://www.nature.com/articles/s41467-020-19187-w">Forest production efficiency increases with growth temperature</a></li>
</ul>
</section>
<section id="mineralization-and-immobilization-of-nitrogen" class="level2">
<h2 class="anchored" data-anchor-id="mineralization-and-immobilization-of-nitrogen">Mineralization and immobilization of nitrogen</h2>
<p>Mineralization and immobilization are key processes in the nitrogen cycle, involving the transformation of nitrogen between organic and inorganic forms. Mineralization converts organic nitrogen to inorganic forms like ammonium, making it available to plants, while immobilization transforms inorganic nitrogen into organic forms within soil microbes, temporarily making it unavailable.</p>
<p>The following article provides a good overview of nitrogen cycle including mineralization and immobilization processes:</p>
<ul>
<li><a href="https://www.google.com/url?sa=t&amp;source=web&amp;rct=j&amp;opi=89978449&amp;url=https://cceonondaga.org/resources/nitrogen-basics-the-nitrogen-cycle&amp;ved=2ahUKEwj1lIm9wNSNAxXCcvUHHQs8DVQQ-NANegQIIxAC&amp;usg=AOvVaw0Ato6pyMqqk8nsTFbTDtCr">Pdf of Note on Nitrogen Cycle</a></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>